(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{63:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"javascript的三种事件模型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#javascript的三种事件模型","aria-hidden":"true"}},[t._v("#")]),t._v(" JavaScript的三种事件模型")]),s("p",[t._v("面试中有时候会提到事件模型的概念，平时云里雾里的，所以找个机会总结一下，并不是很复杂的东西。")]),s("h2",{attrs:{id:"dom0事件模型（原始事件模型）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom0事件模型（原始事件模型）","aria-hidden":"true"}},[t._v("#")]),t._v(" DOM0事件模型（原始事件模型）")]),s("p",[t._v("有两种实现方式")]),s("ul",[s("li",[t._v("通过元素属性来绑定事件")])]),s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("onclick")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("click()"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("点我"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),s("ul",[s("li",[t._v("先获取页面元素，然后以赋值的形式来绑定事件")])]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" btn "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'btn'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbtn"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function-variable function"}},[t._v("onclick")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("//do something")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("//解除事件")]),t._v("\nbtn"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onclick "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n")])]),s("p",[t._v("DOM0缺点")]),s("ol",[s("li",[t._v("一个dom节点只能绑定一个事件，再次绑定将会覆盖之前的事件。")])]),s("h2",{attrs:{id:"dom2事件模型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom2事件模型","aria-hidden":"true"}},[t._v("#")]),t._v(" DOM2事件模型")]),s("p",[t._v("dom2新增冒泡和捕获的概念，并且支持一个元素节点绑定多个事件。")]),s("h3",{attrs:{id:"事件捕获和事件冒泡（capture-bubble"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件捕获和事件冒泡（capture-bubble","aria-hidden":"true"}},[t._v("#")]),t._v(" 事件捕获和事件冒泡（capture,bubble )")]),s("p",[s("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/4337988-1137f57e72c25ba1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),s("p",[t._v("如图所示1,2,3为捕获，4,5,6,7为冒泡，也就是说事件流分为三个阶段：\nDOM2 级事件模型共有三个阶段：")]),s("ol",[s("li",[t._v("事件捕获阶段：事件从 document 向下传播到目标元素，依次检查所有节点是否绑定了监听事件，如果有则执行。")]),s("li",[t._v("事件处理阶段：事件在达到目标元素时，触发监听事件。")]),s("li",[t._v("事件冒泡阶段：事件从目标元素冒泡到 document，并且一次检查各个节点是否绑定了监听函数，如果有则执行。")])]),s("h3",{attrs:{id:"addeventlistener"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#addeventlistener","aria-hidden":"true"}},[t._v("#")]),t._v(" addEventListener")]),s("p",[t._v("这应该是大家用的最熟悉的事件绑定方法了。\naddEventListener有三个参数 事件名称、事件回调、捕获/冒泡")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("btn"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'click'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'btn'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token boolean"}},[t._v("true")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbox"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'click'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'box'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token boolean"}},[t._v("false")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),s("p",[t._v("设置为true，则事件在捕获阶段执行，为false则在冒泡阶段执行。")]),s("h2",{attrs:{id:"ie事件模型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ie事件模型","aria-hidden":"true"}},[t._v("#")]),t._v(" IE事件模型")]),s("p",[t._v("IE事件只支持冒泡，所以事件流有两个阶段：")]),s("ol",[s("li",[t._v("事件处理阶段：事件在达到目标元素时，触发监听事件。")]),s("li",[t._v("事件冒泡阶段：事件从目标元素冒泡到 document，并且一次检查各个节点是否绑定了监听函数，如果有则执行。")])]),s("p",[t._v("实现方法：")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// 绑定事件")]),t._v("\nel"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("attachEvent")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eventType"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// 移除事件")]),t._v("\nel"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("detachEvent")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eventType"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),s("p",[t._v("改事件模型只在IE中有效，不兼容其他浏览器，所以大家了解一下就行。。。")])])}],!1,null,null,null);a.default=e.exports}}]);